# é–€ç‰Œè³‡æ–™é›†è™•ç†æŒ‡å¼• - å¤šç¸£å¸‚æ™ºèƒ½åŒ¹é…ç³»çµ±

## ğŸ“‹ æŒ‡å¼•ç›®çš„

æœ¬æŒ‡å¼•èªªæ˜å¦‚ä½•ç‚ºå¤šç¸£å¸‚æ™ºèƒ½åŒ¹é…ç³»çµ±æº–å‚™å’Œè™•ç†é–€ç‰Œè³‡æ–™é›†ï¼Œç¢ºä¿ç³»çµ±èƒ½æ­£ç¢ºè­˜åˆ¥ä¸åŒç¸£å¸‚çš„è³‡æ–™æ ¼å¼ä¸¦é”åˆ°æœ€ä½³åŒ¹é…æ•ˆæœã€‚

## ğŸ¯ æ ¸å¿ƒè¦æ±‚

### å¿…è¦æ¬„ä½
æ¯å€‹é–€ç‰Œè³‡æ–™é›†å¿…é ˆåŒ…å«ä»¥ä¸‹ä¸‰å€‹æ ¸å¿ƒæ¬„ä½ï¼š
1. **Xåº§æ¨™æ¬„ä½** - æ©«å‘åº§æ¨™ (TWD97æ ¼å¼)
2. **Yåº§æ¨™æ¬„ä½** - ç¸±å‘åº§æ¨™ (TWD97æ ¼å¼)  
3. **è¡—é“æ¬„ä½** - è¡—è·¯æ®µè³‡è¨Š

### å»ºè­°æ¬„ä½
ä»¥ä¸‹æ¬„ä½å¯æå‡åŒ¹é…ç²¾åº¦ï¼š
- **æ‘é‡Œæ¬„ä½** - æ‘é‡Œåç¨±
- **åœ°å€æ¬„ä½** - åœ°å€è³‡è¨Š

## ğŸ“Š æ¨™æº–æ¬„ä½å‘½åè¦ç¯„

### åº§æ¨™æ¬„ä½å‘½å (æŒ‰å„ªå…ˆé †åº)
```
Xåº§æ¨™: æ©«åæ¨™ > TWD97æ©«åæ¨™ > x_3826 > Xåº§æ¨™ > xåº§æ¨™ > X > x
Yåº§æ¨™: ç¸±åæ¨™ > TWD97ç¸±åæ¨™ > y_3826 > Yåº§æ¨™ > yåº§æ¨™ > Y > y
```

### è¡—é“æ¬„ä½å‘½å (æŒ‰å„ªå…ˆé †åº)
```
è¡—é“: è¡—.è·¯æ®µ > è¡—è·¯æ®µ > è¡—_è·¯æ®µ > è¡—å’Œè·¯æ®µ > åœ°å€ > è¡—.è·¯æ®µ.
```

### å…¶ä»–æ¬„ä½å‘½å
```
æ‘é‡Œ: æ‘é‡Œ > village
åœ°å€: åœ°å€ > area
```

## âš ï¸ å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

### 1. åº§æ¨™æ¬„ä½å•é¡Œ

**å•é¡Œ**: ç³»çµ±é¡¯ç¤ºã€Œæ¶æ§‹ç•°å¸¸ã€
```
âŒ XXç¸£ - æ¶æ§‹ç•°å¸¸
```

**æª¢æŸ¥æ–¹æ³•**:
```r
# æª¢æŸ¥æ¬„ä½åç¨±
colnames(ä½ çš„è³‡æ–™é›†åç¨±)

# æª¢æŸ¥åº§æ¨™æ¬„ä½å…§å®¹
head(ä½ çš„è³‡æ–™é›†åç¨±$æ©«åæ¨™)
head(ä½ çš„è³‡æ–™é›†åç¨±$ç¸±åæ¨™)
```

**å¸¸è¦‹åŸå› **:
- åº§æ¨™æ¬„ä½åç¨±ä¸ç¬¦åˆè¦ç¯„
- åº§æ¨™å€¼ç‚ºNAæˆ–éæ•¸å€¼
- åº§æ¨™å€¼è¶…å‡ºå°ç£åˆç†ç¯„åœ

**è§£æ±ºæ–¹æ¡ˆ**:
```r
# é‡æ–°å‘½åæ¬„ä½
names(ä½ çš„è³‡æ–™é›†)[names(ä½ çš„è³‡æ–™é›†) == "èˆŠæ¬„ä½å"] <- "æ©«åæ¨™"
names(ä½ çš„è³‡æ–™é›†)[names(ä½ çš„è³‡æ–™é›†) == "èˆŠæ¬„ä½å"] <- "ç¸±åæ¨™"

# è½‰æ›ç‚ºæ•¸å€¼æ ¼å¼
ä½ çš„è³‡æ–™é›†$æ©«åæ¨™ <- as.numeric(ä½ çš„è³‡æ–™é›†$æ©«åæ¨™)
ä½ çš„è³‡æ–™é›†$ç¸±åæ¨™ <- as.numeric(ä½ çš„è³‡æ–™é›†$ç¸±åæ¨™)

# éæ¿¾ç•°å¸¸åº§æ¨™
ä½ çš„è³‡æ–™é›† <- ä½ çš„è³‡æ–™é›†[
  !is.na(ä½ çš„è³‡æ–™é›†$æ©«åæ¨™) & 
  !is.na(ä½ çš„è³‡æ–™é›†$ç¸±åæ¨™) &
  ä½ çš„è³‡æ–™é›†$æ©«åæ¨™ > 100000 & ä½ çš„è³‡æ–™é›†$æ©«åæ¨™ < 400000 &
  ä½ çš„è³‡æ–™é›†$ç¸±åæ¨™ > 2000000 & ä½ çš„è³‡æ–™é›†$ç¸±åæ¨™ < 3000000,
]
```

## âš ï¸ ç‰¹æ®Šæ ¼å¼æ³¨æ„äº‹é …

### ğŸ”§ éœ€è¦ç‰¹æ®Šè™•ç†çš„ç¸£å¸‚

#### 1. æ–°ç«¹å¸‚ (`Hsinchu_City_housenumber`)
**ç‰¹æ®Šä¹‹è™•**: ä½¿ç”¨ `åœ°å€` æ¬„ä½è€Œé `è¡—.è·¯æ®µ`
```r
# ç³»çµ±è‡ªå‹•è™•ç†æ–¹å¼
# å¾åœ°å€æ¬„ä½æå–è¡—é“è³‡è¨Š
é–€ç‰Œé“è·¯ = sapply(åœ°å€, function(addr) {
  road_match <- regexpr("[^å€é®é„‰ç¸£]{1,15}[è·¯è¡—é“å¤§é“]", addr)
  if(road_match[1] != -1) {
    raw_road <- substr(addr, road_match[1], road_match[1] + attr(road_match, "match.length") - 1)
    return(str_replace_all(raw_road, "å°", "è‡º"))
  }
  return("")
})
```

#### 2. æ¾æ¹–ç¸£ (`Penghu_County_housenumber`)
**ç‰¹æ®Šä¹‹è™•**: è¡—é“æ¬„ä½åç¨±ç‚º `è¡—.è·¯æ®µ.` (å¤šä¸€å€‹é»)
```r
# æ¬„ä½å°æ‡‰
Xåº§æ¨™: æ©«åæ¨™
Yåº§æ¨™: ç¸±åæ¨™  
è¡—é“: è¡—.è·¯æ®µ.  # æ³¨æ„å¤šäº†ä¸€å€‹é»
```

#### 3. å°ä¸­å¸‚ (`Taichung_City_housenumber`)
**ç‰¹æ®Šä¹‹è™•**: æ¬„ä½æ•¸æœ€å¤š (13æ¬„)ï¼Œè³‡æ–™æœ€è±å¯Œ
- åŒ…å«é¡å¤–çš„åˆ†ææ¬„ä½
- å¯èƒ½æœ‰æ›´è©³ç´°çš„åœ°ç†è³‡è¨Š

#### 4. åŸºéš†å¸‚ (`Keelung_City_housenumber`)
**ç‰¹æ®Šä¹‹è™•**: æ¬„ä½æ•¸è¼ƒå°‘ (10æ¬„)
- å¯èƒ½ç¼ºå°‘æŸäº›è¼”åŠ©æ¬„ä½
- ä½†æ ¸å¿ƒåŒ¹é…æ¬„ä½å®Œæ•´

### ğŸ“‹ å„ç¸£å¸‚æ¨™æº–æ¬„ä½çµæ§‹

#### æ¨™æº–11æ¬„çµæ§‹ (å¤§å¤šæ•¸ç¸£å¸‚)
```
1. çœå¸‚ç¸£å¸‚ä»£ç¢¼
2. é„‰é®å¸‚å€ä»£ç¢¼  
3. æ‘é‡Œ
4. é„°
5. è¡—.è·¯æ®µ      # æ ¸å¿ƒè¡—é“æ¬„ä½
6. åœ°å€
7. å··
8. å¼„
9. è™Ÿæ¨“
10. æ©«åæ¨™      # æ ¸å¿ƒXåº§æ¨™
11. ç¸±åæ¨™      # æ ¸å¿ƒYåº§æ¨™
```

#### æ–°ç«¹å¸‚ç‰¹æ®Šçµæ§‹ (7æ¬„)
```
1. [æ¬„ä½1]
2. [æ¬„ä½2]
3. æ‘é‡Œ
4. [æ¬„ä½4]
5. åœ°å€         # ç‰¹æ®Š: ä½¿ç”¨åœ°å€è€Œéè¡—.è·¯æ®µ
6. æ©«åæ¨™       # æ ¸å¿ƒXåº§æ¨™
7. ç¸±åæ¨™       # æ ¸å¿ƒYåº§æ¨™
```

#### å°ä¸­å¸‚è±å¯Œçµæ§‹ (13æ¬„)
```
1-11. æ¨™æº–æ¬„ä½ (åŒä¸Š)
12-13. é¡å¤–åˆ†ææ¬„ä½
```

### ğŸ¯ åº§æ¨™å“è³ªæª¢æŸ¥æ¨™æº–

#### TWD97åº§æ¨™åˆç†ç¯„åœ
```r
# Xåº§æ¨™ (æ©«åæ¨™) åˆç†ç¯„åœ
100,000 < X < 400,000

# Yåº§æ¨™ (ç¸±åæ¨™) åˆç†ç¯„åœ  
2,000,000 < Y < 3,000,000

# æª¢æŸ¥ç¨‹å¼ç¢¼
valid_coords <- è³‡æ–™é›†$æ©«åæ¨™ > 100000 & è³‡æ–™é›†$æ©«åæ¨™ < 400000 &
                è³‡æ–™é›†$ç¸±åæ¨™ > 2000000 & è³‡æ–™é›†$ç¸±åæ¨™ < 3000000
```

#### å„ç¸£å¸‚åº§æ¨™ç¯„åœåƒè€ƒ
- **åŒ—éƒ¨** (å°åŒ—ã€æ–°åŒ—ã€æ¡ƒåœ’): X: 250K-330K, Y: 2.74M-2.80M
- **ä¸­éƒ¨** (å°ä¸­ã€å½°åŒ–ã€å—æŠ•): X: 190K-250K, Y: 2.64M-2.71M  
- **å—éƒ¨** (å°å—ã€é«˜é›„ã€å±æ±): X: 170K-230K, Y: 2.43M-2.58M
- **æ±éƒ¨** (å°æ±ã€èŠ±è“®): X: 280K-350K, Y: 2.55M-2.68M
- **é›¢å³¶** (æ¾æ¹–ã€é‡‘é–€): X: 160K-210K, Y: 2.60M-2.63M

## ğŸ”§ è³‡æ–™é›†æº–å‚™æª¢æŸ¥æ¸…å–®

### è¼‰å…¥å‰æª¢æŸ¥
- [ ] ç¢ºèªè³‡æ–™é›†ç‚º data.frame æ ¼å¼
- [ ] æª¢æŸ¥å¿…è¦æ¬„ä½æ˜¯å¦å­˜åœ¨ä¸”å‘½åæ­£ç¢º
- [ ] ç¢ºèªåº§æ¨™å€¼ç‚ºæ•¸å€¼æ ¼å¼ä¸”åœ¨åˆç†ç¯„åœå…§
- [ ] æª¢æŸ¥è¡—é“è³‡è¨Šå®Œæ•´æ€§

### è¼‰å…¥å¾Œé©—è­‰
```r
# åŸ·è¡Œæ¶æ§‹æª¢æŸ¥
schema <- detect_housenumber_schema("ä½ çš„è³‡æ–™é›†åç¨±")
print(schema)

# ç¢ºèª is_valid = TRUE
if(schema$is_valid) {
  cat("âœ… è³‡æ–™é›†æ¶æ§‹æ­£å¸¸\n")
} else {
  cat("âŒ éœ€è¦ä¿®æ­£ä»¥ä¸‹å•é¡Œ:\n")
  if(is.na(schema$x_col)) cat("- æ‰¾ä¸åˆ°Xåº§æ¨™æ¬„ä½\n")
  if(is.na(schema$y_col)) cat("- æ‰¾ä¸åˆ°Yåº§æ¨™æ¬„ä½\n") 
  if(is.na(schema$street_col)) cat("- æ‰¾ä¸åˆ°è¡—é“æ¬„ä½\n")
}
```

## ğŸ“ ç¸£å¸‚è³‡æ–™é›†å°ç…§è¡¨

ç›®å‰æ”¯æ´çš„ç¸£å¸‚åŠå°æ‡‰è³‡æ–™é›†ï¼š

### æœ‰ç¨ç«‹è³‡æ–™é›† (17å€‹)

#### ğŸ™ï¸ ç›´è½„å¸‚

**é«˜é›„å¸‚** (`Kaohsiung_City_housenumber`)
- è³‡æ–™ç­†æ•¸: 1,240,906 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: è³‡æ–™é‡æœ€å¤§ï¼Œè¦†è“‹å®Œæ•´

**æ–°åŒ—å¸‚** (`NewTaipei_housenumber`)
- è³‡æ–™ç­†æ•¸: 1,961,175 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: å…¨å°è³‡æ–™é‡æœ€å¤§

**è‡ºåŒ—å¸‚** (`Taipei_housenumber`)
- è³‡æ–™ç­†æ•¸: 1,147,845 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: é¦–éƒ½è³‡æ–™ï¼Œå“è³ªå„ªè‰¯

**è‡ºä¸­å¸‚** (`Taichung_City_housenumber`)
- è³‡æ–™ç­†æ•¸: 1,292,650 ç­†
- æ¬„ä½æ•¸: 13 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: æ¬„ä½æ•¸æœ€å¤šï¼Œè³‡æ–™æœ€è±å¯Œ

**è‡ºå—å¸‚** (`Tainan_City_housenumber`)
- è³‡æ–™ç­†æ•¸: 833,424 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: å¤éƒ½è³‡æ–™ï¼Œæ­·å²è¡—é“å¤š

**æ¡ƒåœ’å¸‚** (`Taoyuan_City_housenumber`)
- è³‡æ–™ç­†æ•¸: 1,068,369 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: æ©Ÿå ´åŸå¸‚ï¼Œç™¼å±•è¿…é€Ÿ

#### ğŸ˜ï¸ ä¸€èˆ¬ç¸£å¸‚

**å˜‰ç¾©ç¸£** (`Chiayi_County_housenumber`)
- è³‡æ–™ç­†æ•¸: 196,971 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: ç³»çµ±å„ªåŒ–åŸºæº–ç¸£å¸‚ï¼ŒåŒ¹é…ç‡96.54%

**æ–°ç«¹å¸‚** (`Hsinchu_City_housenumber`) âš ï¸
- è³‡æ–™ç­†æ•¸: 210,396 ç­†
- æ¬„ä½æ•¸: 7 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `åœ°å€` (ç‰¹æ®Š)
- ç‰¹è‰²: ç§‘æŠ€åŸï¼Œä½¿ç”¨åœ°å€æ¬„ä½è€Œéè¡—.è·¯æ®µ

**æ–°ç«¹ç¸£** (`Hsinchu_County_housenumber`)
- è³‡æ–™ç­†æ•¸: 258,967 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: ç§‘æŠ€ç”¢æ¥­èšé›†å€

**è‹—æ —ç¸£** (`Miaoli_County_housenumber`)
- è³‡æ–™ç­†æ•¸: 224,282 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: å±±å€è¼ƒå¤šï¼Œåœ°å½¢è¤‡é›œ

**å½°åŒ–ç¸£** (`Changhua_County_housenumber`)
- è³‡æ–™ç­†æ•¸: 467,023 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: ä¸­éƒ¨é‡è¦ç¸£å¸‚ï¼Œè³‡æ–™é‡å¤§

**é›²æ—ç¸£** (`Yunlin_County_housenumber`)
- è³‡æ–™ç­†æ•¸: 196,605 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: è¾²æ¥­ç¸£ï¼Œé„‰æ‘åœ°å€å¤š

**å±æ±ç¸£** (`Pingtung_County_housenumber`)
- è³‡æ–™ç­†æ•¸: 327,457 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: å—å°ç£é‡è¦ç¸£å¸‚

**è‡ºæ±ç¸£** (`Taitung_County_housenumber`)
- è³‡æ–™ç­†æ•¸: 50,192 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: æ±éƒ¨ç¸£å¸‚ï¼Œè³‡æ–™é‡è¼ƒå°
- å®Œæ•´æ¬„ä½: çœå¸‚ç¸£å¸‚ä»£ç¢¼, é„‰é®å¸‚å€ä»£ç¢¼, æ‘é‡Œ, é„°, è¡—.è·¯æ®µ, åœ°å€, å··, å¼„, è™Ÿæ¨“, æ©«åæ¨™, ç¸±åæ¨™

**æ¾æ¹–ç¸£** (`Penghu_County_housenumber`) âš ï¸
- è³‡æ–™ç­†æ•¸: 39,683 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ.` (ç‰¹æ®Š)
- ç‰¹è‰²: é›¢å³¶ç¸£å¸‚ï¼Œè¡—é“æ¬„ä½å¤šä¸€å€‹é»
- å®Œæ•´æ¬„ä½: çœå¸‚ç¸£å¸‚ä»£ç¢¼, é„‰é®å¸‚å€ä»£ç¢¼, æ‘é‡Œ, é„°, è¡—.è·¯æ®µ., åœ°å€, å··, å¼„, è™Ÿæ¨“, æ©«åæ¨™, ç¸±åæ¨™

**åŸºéš†å¸‚** (`Keelung_City_housenumber`)
- è³‡æ–™ç­†æ•¸: 192,093 ç­†
- æ¬„ä½æ•¸: 10 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: æ¸¯éƒ½åŸå¸‚ï¼Œæ¬„ä½æ•¸è¼ƒå°‘

**é‡‘é–€ç¸£** (`Kinmen_County_housenumber`)
- è³‡æ–™ç­†æ•¸: 32,005 ç­†
- æ¬„ä½æ•¸: 11 æ¬„
- Xåº§æ¨™: `æ©«åæ¨™` | Yåº§æ¨™: `ç¸±åæ¨™` | è¡—é“: `è¡—.è·¯æ®µ`
- ç‰¹è‰²: é›¢å³¶ç¸£å¸‚ï¼Œè³‡æ–™é‡æœ€å°

### ç„¡ç¨ç«‹è³‡æ–™é›† (5å€‹)
- **å˜‰ç¾©å¸‚**: ä½µå…¥å˜‰ç¾©ç¸£è™•ç†æˆ–éœ€å¦å¤–å–å¾—è³‡æ–™
- **å—æŠ•ç¸£**: å±±å€ç¸£å¸‚ï¼Œéœ€å¦å¤–å–å¾—è³‡æ–™
- **å®œè˜­ç¸£**: æ±åŒ—éƒ¨ç¸£å¸‚ï¼Œéœ€å¦å¤–å–å¾—è³‡æ–™  
- **èŠ±è“®ç¸£**: æ±éƒ¨ç¸£å¸‚ï¼Œéœ€å¦å¤–å–å¾—è³‡æ–™
- **é€£æ±Ÿç¸£**: é¦¬ç¥–åœ°å€ï¼Œéœ€å¦å¤–å–å¾—è³‡æ–™

### ğŸ“Š è³‡æ–™é›†çµ±è¨ˆæ‘˜è¦

| åˆ†é¡ | æ•¸é‡ | ç¸½è³‡æ–™ç­†æ•¸ | å¹³å‡ç­†æ•¸ |
|-----|------|-----------|----------|
| ç›´è½„å¸‚ | 6å€‹ | 7,343,769ç­† | 1,223,962ç­† |
| ä¸€èˆ¬ç¸£å¸‚ | 11å€‹ | 2,424,677ç­† | 220,425ç­† |
| ç‰¹æ®Šæ ¼å¼ | 2å€‹ | 249,079ç­† | 124,540ç­† |
| ç¸½è¨ˆ | 17å€‹ | 9,768,446ç­† | 574,614ç­† |

## ğŸš€ æ–°å¢ç¸£å¸‚è³‡æ–™é›†æ­¥é©Ÿ

### 1. æº–å‚™è³‡æ–™
```r
# è¼‰å…¥æ–°çš„ç¸£å¸‚è³‡æ–™
æ–°ç¸£å¸‚_housenumber <- read.csv("æ–°ç¸£å¸‚é–€ç‰Œè³‡æ–™.csv", fileEncoding = "UTF-8")

# æª¢æŸ¥å’Œèª¿æ•´æ¬„ä½åç¨±
colnames(æ–°ç¸£å¸‚_housenumber)
names(æ–°ç¸£å¸‚_housenumber)[names(æ–°ç¸£å¸‚_housenumber) == "X"] <- "æ©«åæ¨™"
names(æ–°ç¸£å¸‚_housenumber)[names(æ–°ç¸£å¸‚_housenumber) == "Y"] <- "ç¸±åæ¨™"
```

### 2. æ›´æ–°å°ç…§è¡¨
åœ¨ `get_city_dataset_mapping()` å‡½æ•¸ä¸­æ·»åŠ ï¼š
```r
"æ–°ç¸£å¸‚å" = "æ–°ç¸£å¸‚_housenumber"
```

### 3. æ¸¬è©¦é©—è­‰
```r
# æ¸¬è©¦æ¶æ§‹åµæ¸¬
test_schema <- detect_housenumber_schema("æ–°ç¸£å¸‚_housenumber")
print(test_schema)

# ç³»çµ±æº–å‚™ç‹€æ…‹æª¢æŸ¥
readiness <- check_multi_city_readiness()
```

## ğŸ“Š å“è³ªæ¨™æº–

### å„ªç§€è³‡æ–™é›†æ¨™æº– (åŒ¹é…ç‡ â‰¥ 95%)
- åº§æ¨™è³‡è¨Šå®Œæ•´ä¸”æº–ç¢º
- è¡—é“å‘½åè¦ç¯„çµ±ä¸€
- è³‡æ–™è¦†è“‹ç¯„åœå»£æ³›
- å¾ˆå°‘æœ‰NAå€¼

### éœ€æ”¹å–„è³‡æ–™é›†æŒ‡æ¨™ (åŒ¹é…ç‡ < 80%)
- å¤§é‡åº§æ¨™ç¼ºå¤±
- è¡—é“åç¨±ä¸è¦ç¯„
- è³‡æ–™å“è³ªä¸ä½³

## ğŸ” å¿«é€Ÿæª¢æŸ¥ç¨‹å¼ç¢¼

### ä¸€éµæª¢æŸ¥ç¸£å¸‚è³‡æ–™é›†ç‹€æ…‹
```r
# å¿«é€Ÿæª¢æŸ¥æ‰€æœ‰è¼‰å…¥çš„é–€ç‰Œè³‡æ–™é›†
check_all_housenumber_datasets <- function() {
  housenumber_datasets <- ls(pattern = "housenumber", envir = .GlobalEnv)
  
  cat("=== æ‰€æœ‰é–€ç‰Œè³‡æ–™é›†æª¢æŸ¥ ===\n")
  cat("æ‰¾åˆ°", length(housenumber_datasets), "å€‹è³‡æ–™é›†\n\n")
  
  for(dataset in housenumber_datasets) {
    obj <- get(dataset, envir = .GlobalEnv)
    if(is.data.frame(obj)) {
      cat("ğŸ“", dataset, "\n")
      cat("  ç­†æ•¸:", format(nrow(obj), big.mark = ","), "ç­†\n")
      cat("  æ¬„æ•¸:", ncol(obj), "æ¬„\n")
      cat("  æ¬„ä½:", paste(colnames(obj)[1:min(5, ncol(obj))], collapse = ", "))
      if(ncol(obj) > 5) cat("...")
      cat("\n")
      
      # æª¢æŸ¥åº§æ¨™æ¬„ä½
      has_x <- any(c("æ©«åæ¨™", "TWD97æ©«åæ¨™", "x_3826") %in% colnames(obj))
      has_y <- any(c("ç¸±åæ¨™", "TWD97ç¸±åæ¨™", "y_3826") %in% colnames(obj))
      has_street <- any(c("è¡—.è·¯æ®µ", "è¡—.è·¯æ®µ.", "åœ°å€") %in% colnames(obj))
      
      if(has_x && has_y && has_street) {
        cat("  ç‹€æ…‹: âœ… æ¶æ§‹å®Œæ•´\n")
      } else {
        cat("  ç‹€æ…‹: âŒ æ¶æ§‹ç•°å¸¸ -")
        if(!has_x) cat(" ç¼ºXåº§æ¨™")
        if(!has_y) cat(" ç¼ºYåº§æ¨™") 
        if(!has_street) cat(" ç¼ºè¡—é“")
        cat("\n")
      }
      cat("\n")
    }
  }
}

# åŸ·è¡Œæª¢æŸ¥
check_all_housenumber_datasets()
```

### æª¢æŸ¥ç‰¹å®šè³‡æ–™é›†è©³ç´°è³‡è¨Š
```r
# è©³ç´°æª¢æŸ¥ç‰¹å®šè³‡æ–™é›†
check_dataset_details <- function(dataset_name) {
  if(!exists(dataset_name, envir = .GlobalEnv)) {
    cat("âŒ è³‡æ–™é›†ä¸å­˜åœ¨:", dataset_name, "\n")
    return(NULL)
  }
  
  data <- get(dataset_name, envir = .GlobalEnv)
  
  cat("=== è³‡æ–™é›†è©³ç´°æª¢æŸ¥:", dataset_name, "===\n")
  cat("è³‡æ–™ç­†æ•¸:", format(nrow(data), big.mark = ","), "\n")
  cat("æ¬„ä½æ•¸é‡:", ncol(data), "\n")
  cat("å®Œæ•´æ¬„ä½:", paste(colnames(data), collapse = ", "), "\n\n")
  
  # æª¢æŸ¥åº§æ¨™
  coord_cols <- colnames(data)[grepl("åº§æ¨™|åæ¨™", colnames(data))]
  if(length(coord_cols) > 0) {
    cat("åº§æ¨™æ¬„ä½:", paste(coord_cols, collapse = ", "), "\n")
    for(col in coord_cols) {
      if(is.numeric(data[[col]])) {
        cat("  ", col, "ç¯„åœ:", round(min(data[[col]], na.rm = TRUE)), "~", 
            round(max(data[[col]], na.rm = TRUE)), "\n")
        cat("  ", col, "NAæ•¸é‡:", sum(is.na(data[[col]])), "\n")
      }
    }
  }
  
  # æª¢æŸ¥è¡—é“
  street_cols <- colnames(data)[grepl("è¡—|è·¯|åœ°å€", colnames(data))]
  if(length(street_cols) > 0) {
    cat("\nè¡—é“ç›¸é—œæ¬„ä½:", paste(street_cols, collapse = ", "), "\n")
    for(col in street_cols) {
      na_count <- sum(is.na(data[[col]]) | data[[col]] == "")
      cat("  ", col, "ç©ºå€¼æ•¸é‡:", na_count, "(", round(na_count/nrow(data)*100, 1), "%)\n")
    }
  }
  
  # åŸ·è¡Œæ¶æ§‹åµæ¸¬
  cat("\næ¶æ§‹åµæ¸¬çµæœ:\n")
  schema <- detect_housenumber_schema(dataset_name)
  print(schema)
}

# ä½¿ç”¨ç¯„ä¾‹
# check_dataset_details("Taitung_County_housenumber")
# check_dataset_details("Penghu_County_housenumber")
```

## ğŸ’¡ æœ€ä½³å¯¦å‹™å»ºè­°

1. **æ¬„ä½å‘½åä¸€è‡´æ€§**: å„˜é‡ä½¿ç”¨æ¨™æº–å‘½åè¦ç¯„
2. **è³‡æ–™æ¸…ç†**: è¼‰å…¥å‰å…ˆé€²è¡ŒåŸºæœ¬çš„è³‡æ–™æ¸…ç†
3. **ç·¨ç¢¼çµ±ä¸€**: ç¢ºä¿ä½¿ç”¨UTF-8ç·¨ç¢¼
4. **æ¸¬è©¦é©—è­‰**: æ¯æ¬¡ä¿®æ”¹å¾Œéƒ½è¦æ¸¬è©¦æ¶æ§‹åµæ¸¬
5. **æ–‡æª”è¨˜éŒ„**: è¨˜éŒ„ç‰¹æ®Šè™•ç†æ–¹å¼å’Œå·²çŸ¥å•é¡Œ

## ğŸ“ æŠ€è¡“æ”¯æ´

å¦‚é‡åˆ°æœ¬æŒ‡å¼•æœªæ¶µè“‹çš„å•é¡Œï¼Œè«‹ï¼š
1. åŸ·è¡Œå®Œæ•´çš„æ¶æ§‹æª¢æŸ¥
2. è¨˜éŒ„éŒ¯èª¤è¨Šæ¯å’Œè³‡æ–™æ¨£æœ¬
3. è¯ç¹«æŠ€è¡“åœ˜éšŠå”åŠ©è™•ç†

---

**ç‰ˆæœ¬**: 1.0  
**æ›´æ–°æ—¥æœŸ**: 2025-07-09  
**é©ç”¨ç³»çµ±**: å¤šç¸£å¸‚æ™ºèƒ½åŒ¹é…ç³»çµ± v2.0